<!-- ---------------------------ここからトップビジュアルフェードインのための記述------------------------------- -->
<!-- <head>
<script>
jQuery(function(){
	// 設定
	var $width =640; // 横幅
	var $height =300; // 高さ
	var $interval = 3000; // 切り替わりの間隔（ミリ秒）
	var $fade_speed = 1000; // フェード処理の早さ（ミリ秒）
	$("#slide ul li").css({"position":"relative","overflow":"hidden","width":$width,"height":$height});
	$("#slide ul li").hide().css({"position":"absolute","top":0,"left":0});
	$("#slide ul li:first").addClass("active").show();
	setInterval(function(){
	var $active = $("#slide ul li.active");
	var $next = $active.next("li").length?$active.next("li"):$("#slide ul li:first");
	$active.fadeOut($fade_speed).removeClass("active");
	$next.fadeIn($fade_speed).addClass("active");
	},$interval);
	});
</script>
<div id="slide">
<ul>
<li><a href=""><img src="assets/image1.jpg" alt="" width="640" height="300" /></a></li>
<li><a href=""><img src="assets/image2.jpg" alt="" width="640" height="300" /></a></li>
<li><a href=""><img src="assets/image3.jpg" alt="" width="640" height="300" /></a></li>
</ul>
</div> -->
<!-- ---------------------------ここまでトップビジュアルフェードインのための記述------------------------------- -->
<!-- ---------------------------ここから画像拡大ための記述（実験中）------------------------------- -->
</head>

<div class="gallery"><a class="fancybox" href="assets/image3.jpg" target="_blank"><img src="assets/image3.jpg"></a></div>

<script>
$(document).ready(function() {
  $("a.fancybox").fancybox();
});
</script>

<!-- ---------------------------ここまで画像拡大ための記述------------------------------- -->
<!-- ---------------------------ここから画像表示スクロールための記述（検証中）------------------------------- -->
<div id="entry_list_more">
  <ul>
    <li>～1件目の記事～</li>
    <li>～2件目の記事～</li>
    <li>～3件目の記事～</li>
    <li>～4件目の記事～</li>
    <li>～5件目の記事～</li>
    <li>～6件目の記事～</li>
    <li>～7件目の記事～</li>
    <li>～8件目の記事～</li>
    <li>～9件目の記事～</li>
    <li>～10件目の記事～</li>
    <li>～11件目の記事～</li>
    <li>～12件目の記事～</li>
    <li>～13件目の記事～</li>
    <li>～14件目の記事～</li>
    <li>～15件目の記事～</li>
    <li>～16件目の記事～</li>
    <li>～17件目の記事～</li>
    <li>～18件目の記事～</li>
    <li>～19件目の記事～</li>
    <li>～20件目の記事～</li>
  </ul>
  
</div>


<!-- ---------------------------ここまで画像表示スクロールための記述------------------------------- -->


<!-- 新着アイテム-->

<!-- 新着アイテム全体の箱 -->
<div class="product_index_content">

	<h1 class="product_index_content_headtitle">新着アイテム</h1>
        <% @products.each do |product| %>
<%=link_to product_path(product.id) do %>
	        	<!-- 画像と商品名と値段の箱 -->
	        	<div class="product_index_middle_box">

					<span class="fancybox"><%= attachment_image_tag product, :image, :size => "300x300", fallback: "no_image.jpg", class: "product_index_middle_box1" %></span>
				<!-- :fill, 300, 300でなく　sizeで表記したらうまくいきました。。 -->
				<!-- 商品名と値段の箱 -->
				<div class="product_index_middle_box2">


						<h2 class="product_index_small_box_album">
							<%= truncate(product.artist, length: 8 ) %> /
							<%= truncate(product.album, length: 8 ) %>
						</h2>

						<% if product.new_price == nil %>
							<h2>￥ <%= product.price %>
							</h2>
						<% else %>
							<span class="product_index_small_box_line">
							<h2 class="product_index_small_box_old_price">￥ <%= product.price %></h2>
							</span>
							<h2 class="product_index_small_box_new_price">￥ <%= product.new_price %></h2>
						<% end %>
				</div>
				<!-- 商品名と値段の箱fin -->
			</div>
			<!-- 画像と商品名と値段の箱fin -->
        <% end %>
		<% end %>
		<div id="more_btn">もっと見る <i class="fa fa-chevron-down" aria-hidden="true"></i></div>
  <div id="close_btn">表示数を戻す <i class="fa fa-chevron-up" aria-hidden="true"></i></div>
</div>

<script>
  //liの個数を取得しておく
 	var listContents = $(".product_index_middle_box").length;
 	console.log(listContents);

	$(".product_index_middle_box").each(function(index){ //何番め以降を非表示にするために関数で指定が必要
		//最初に表示させるアイテムの数
		var Num = 3;

		//最初はmoreボタン表示にし、
		$(this).find('#more_btn').show();//thisに入ってるのは.product_index_middle_box
		$(this).find('#close_btn').hide();
		//10行目まで表示

		if(index >= Num){//上で定義したNum = 3以降の画像を指定
		$(this).hide();//隠す
		}

		//moreボタンがクリックされた時
		$('#more_btn').click(function(){
			//Numに+3ずつしていく = 3行ずつ追加する
			Num +=3;
			$(this).parent().find(".product_index_middle_box:lt("+Num+")").slideDown();
			//:lt = ("")より前までを指定（.product_index_middle_boxの中で３＋３＝６より前までを指定）
			//thisに入ってるのは#more_btn

			//liの個数よりNumが多い時、
			if(listContents <= Num){
			Num = 3;//「閉じる」がクリックされた後、表示させるアイテムの数
			gtNum = Num-1;
			$('#more_btn').hide();
			$('#close_btn').show();

			//「閉じる」がクリックされたら、
			$('#close_btn').click(function(){

				$(this).parent().find(".product_index_middle_box:gt("+gtNum+")").slideUp();//11行目以降は非表示にし、
				//thisに入ってるのは#close_btn
				$(this).hide();//閉じるボタンを非表示
				$('#more_btn').show();//moreボタン表示に
		    });
	    }
	 });
  });
</script>
<!-- 新着アイテム全体の箱fin -->


<!-- j-popアイテム全体の箱 -->
<div class="product_index_content_2">
	<h1 class="product_index_content_headtitle">J-POP</h1>

        <% @jpops.first(4).each do |jpop| %>

		<%=link_to  product_path(jpop.id) do %>

        	<!-- 画像と商品名と値段の箱 -->
        	<div class="product_index_middle_box_2">

				<%= attachment_image_tag jpop, :image, :size => "300x300", fallback: "no_image.jpg", class:"product_index_middle_box1" %>

				<!-- 商品名と値段の箱 -->
				<div class="product_index_middle_box2">

					<h2 class="product_index_small_box_album">
							<%= truncate(jpop.artist, length: 8 ) %> /
							<%= truncate(jpop.album, length: 8 ) %>
					</h2>

					<% if jpop.new_price == nil %>
						<h2>￥ <%= jpop.price %>
						</h2>
					<% else %>
						<span class="product_index_small_box_line">
						<h2 class="product_index_small_box_old_price">￥ <%= jpop.price %></h2>
						</span>
						<h2 class="product_index_small_box_new_price">￥ <%= jpop.new_price %></h2>
					<% end %>

				</div>
				<!-- 商品名と値段の箱fin -->

			</div>
			<!-- 画像と商品名と値段の箱fin -->

        <% end %>
		<% end %>
</div>
<!-- j-popアイテム全体の箱fin -->



<!-- 洋楽アイテム全体の箱 -->
<div class="product_index_content_2">
	<h1 class="product_index_content_headtitle">洋楽</h1>

        <% @worlds.first(4).each do |world| %>
      
		<%=link_to  product_path(world.id) do %>

        	<!-- 画像と商品名と値段の箱 -->
        	<div class="product_index_middle_box_2">

				<%= attachment_image_tag world, :image, :size => "300x300", fallback: "no_image.jpg", class:"product_index_middle_box1" %>

				<!-- 商品名と値段の箱 -->
				<div class="product_index_middle_box2">

					<h2 class="product_index_small_box_album">
							<%= truncate(world.artist, length: 8 ) %> /
							<%= truncate(world.album, length: 8 ) %>

					</h2>

					<% if world.new_price == nil %>
						<h2>￥ <%= world.price %>
						</h2>
					<% else %>
						<span class="product_index_small_box_line">
						<h2 class="product_index_small_box_old_price">￥ <%= world.price %></h2>
						</span>
						<h2 class="product_index_small_box_new_price">￥ <%= world.new_price %></h2>
					<% end %>

				</div>
				<!-- 商品名と値段の箱fin -->

			</div>
			<!-- 画像と商品名と値段の箱fin -->

        <% end %>
		<% end %>
</div>
<!-- 洋楽アイテム全体の箱fin -->


<!-- K-POPアイテム全体の箱 -->
<div class="product_index_content_3">
	<h1 class="product_index_content_headtitle">K-POP</h1>

        <% @kpops.first(4).each do |kpop| %>    
		<%=link_to  product_path(kpop.id) do %>


        	<!-- 画像と商品名と値段の箱 -->
        	<div class="product_index_middle_box_2">



				<%= attachment_image_tag kpop, :image, :size => "300x300", fallback: "no_image.jpg", class:"product_index_middle_box1" %>

				<!-- 商品名と値段の箱 -->
				<div class="product_index_middle_box2">

					<h2 class="product_index_small_box_album">

							<%= truncate(kpop.artist, length: 8 ) %> /
							<%= truncate(kpop.album, length: 8 ) %>

					</h2>

					<% if kpop.new_price == nil %>
						<h2>￥ <%= kpop.price %>
						</h2>
					<% else %>
						<span class="product_index_small_box_line">
						<h2 class="product_index_small_box_old_price">￥ <%= kpop.price %></h2>
						</span>
						<h2 class="product_index_small_box_new_price">￥ <%= kpop.new_price %></h2>
					<% end %>

				</div>
				<!-- 商品名と値段の箱fin -->

			</div>
			<!-- 画像と商品名と値段の箱fin -->

        <% end %>
		<% end %>
</div>
<!-- K-POPアイテム全体の箱fin -->
<!-- --------画像ポップアップここから------------------ -->
<script>
$(document).ready(function() {
  $("span.fancybox").fancybox();
});
</script>
<!-- --------画像ポップアップまで------------------ -->


 <%= link_to image_tag('youtube_profile_image.png',:id => "funcBtn"), new_product_path %>

<style type="text/css">

/*---- 機能ボタン ----*/

#funcBtn{
position: fixed; bottom: 10px; right: 10px;
display: block;
width: 200px;
height: 200px;
border-radius: 50%;

/*画像リンクのため不要*/
/*line-height: 60px;
border-radius: 50% 50%;
background: red;
color: white;
font-size: 20px;
font-weight: bold;
text-align: center;
white-space: nowrap;*/

/*最悪　記入不要　WebKitがクロームに対応するものらしいが動く*/
/*-webkit-transition:
opacity 0.2s ease-out 0s,
bottom 0.2s ease-out 0s,
right 0.2s ease-out 0s,
-webkit-transform 0.2s ease-out 0s;*/

/*firefox対応しないため不要*/
/*-moz-transition:
opacity 0.2s ease-out 0s,
bottom 0.2s ease-out 0s,
right 0.2s ease-out 0s,
-moz-transform 0.2s ease-out 0s;*/
transition:
opacity 0.2s ease-out 0s,
/*opacity 透明度を調整するもの ease-outは高速で動き出し、最後に減速します*/
bottom 0.2s ease-out 0s,
/*下に下がる速さ*/
right 0.2s ease-out 0s,
/*右に動く速さ*/
transform 0.2s ease-out 0s;
/*これがないとゆっくり動かない*/
}
#funcBtn.scroll{
	/*スクロールした時にこのCSSが効く*/
opacity: 0;
bottom: -50px;
right: 0px;
/*移動方向*/
/*-webkit-transform: rotate( 45deg );
-moz-transform: rotate( 45deg );*/
/*上に習い不要説ある*/
transform: rotate( 45deg );
}


</style>

<!---- スクリプト ---->
<script type="text/javascript">

/*---- グローバル変数 ----*/

var tmr_funcBtn = null;

// これがないと消えたまんまになる

/*---- スクロール時に実行 ----*/

window.onscroll = function(){
var funcBtn = document.getElementById("funcBtn");
funcBtn.className = "scroll";
clearTimeout( tmr_funcBtn );
tmr_funcBtn = setTimeout( function(){ funcBtn.className = "" }, 500 );
}


</script>

</head>

<body>

<!-- https://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q13157245918 これの丸パクリです-->
